<div class="row">
	<div class="col">
		<%= if (errors) { %>
		<%= for (key, val) in errors { %>
		<div class="alert alert-danger alert-dismissible fade show m-1" role="alert">
			<%= val %>
			<button type="button" class="close" data-dismiss="alert" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>
		<% } %>
		<% } %>
	</div>
</div>
<div class="row">
	<div class="col-md-8 offset-md-2">
		<h1 class="text-center"><%= category.Title %></h1>
	</div>
</div>
<div class="row mt-3 justify-content-center">
	<div class="col-md-8 col-sm-10">
		<h2>Create a new topic</h2>
		<form action="<%= topicsCreatePath() %>" method="POST">
			<%= csrf() %>
			<div class="form-group">
				<label for="title">Title</label>
				<input type="text" name="Title" class="form-control" id="title" value="<%= topic.Title %>">
			</div>
			<div class="form-group">
				<label for="content">Content</label>
				<textarea class="form-control" name="Content" id="content"  rows="20"><%= topic.Content %></textarea>
			</div>
			<button type="submit" class="btn btn-primary">Create</button>
		</form>
	</div>
</div>

<div class="row">
	<div class="col-md-8 offset-md-2">
		<%= for (t) in topics { %>
		<hr>
		<p class="author"><%= t.Author.Username %></p>
		<p style="white-space: pre-wrap;"><%= t.Title %></p>
		<!-- Emails are unique, and '==' does not work with UUIDs -->
		<%= if (current_user.Email == t.Author.Email) { %>
		<a href="<%= topicsDeletePath({tid: t.ID}) %>" class="btn btn-danger btn-sm m-0">Delete topic</a>
		<a href="<%= topicsEditPath({tid: t.ID}) %>" class="btn btn-primary btn-sm m-0">Edit topic</a>
		<% } %>
		<% } %>
	</div>
</div>


